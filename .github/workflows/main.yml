name: Install Linux packages

on: workflow_dispatch
jobs:
  build:

    runs-on: ubuntu-22.04
    steps:
    - uses: actions/checkout@v2
    - name: wget
      run: wget 1.1.1.1
      
    - name: Check if release has been created
      uses: mukunku/tag-exists-action@v1.0.0
      id: checkTag
      with: 
        tag: 'v1'
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

    # Publish build
    - name: Create Release
      if: steps.checkTag.outputs.exists == false
      id: create_release
      uses: actions/create-release@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} 
      with:
        tag_name: ${{ github.ref }}
        release_name: ${{ github.ref }}
        draft: false
        prerelease: false
          
    - name: Upload binaries to release
      uses: svenstaro/upload-release-action@v2
      with:
        repo_token: ${{ secrets.GITHUB_TOKEN }}
        file: index.html
        asset_name: index.html
        tag: ${{ github.ref }}
